{"version":3,"sources":["components/term/XTerm.tsx","components/term/term_theme.ts","config/config.ts","components/files/GridFileItem.tsx","components/FileTrans.tsx","libs/utils.ts","config/api_routers.ts","libs/string_format.ts","components/PathNav.tsx","components/SftpUpload.tsx","components/files/files_types.ts","components/files/DownloadingFile.tsx","libs/sshwebsocket.ts","libs/terminal-resize.ts","components/Console.tsx","locales/locales.ts","locales/i18n.ts","components/layout/Footer.tsx","components/layout/Header.tsx","components/Signin.tsx","components/Home.tsx","assets/ssh.png","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["Xterm","props","terminalRef","terminal","React","onData","bind","onCursorMove","onKey","onBinary","onLineFeed","onScroll","onSelectionChange","onRender","onResize","onTitleChange","setupTerminal","this","Terminal","options","addons","forEach","addon","loadAddon","customKeyEventHandler","attachCustomKeyEventHandler","current","open","dispose","data","event","newPosition","newTitle","className","ref","theme","default_theme","foreground","background","cursor","selection","black","brightBlack","red","brightRed","green","brightGreen","yellow","brightYellow","magenta","brightMagenta","blue","brightBlue","cyan","brightCyan","white","brightWhite","abc_theme","config","net","protocol","webSocketProtocol","host","window","location","isVPN","midParams","api_domain","process","REACT_APP_API_URL","vpnHost","vpnParame","jwt","tokenName","router","basepath","REACT_APP_ROUTER_BASE","REACT_APP_API_HTTPS","pathname","startsWith","timer","ConnStatus","util","title","document","loadUrl","url","params","loadWebSocketUrl","axiosInstance","axios","create","timeout","transformRequest","ret","it","encodeURIComponent","headers","apiRouters","sign_in","ws_ssh","ws_sftp","sftp_dl","sftp_ls","sftp_upload","CID","stringFormat","format","str","arr","replace","_","index","SPLIT_CHAR","PathNav","path","onPathClick","is_abs_path","dirs","split","onItemClicked","i","length","dirs_dp","slice","splice","selected_path","join","Button","onClick","height","paddingLeft","paddingRight","appearance","intent","SlashIcon","HomeIcon","map","dir","style","fontSize","activeStyle","boxShadow","SftpUpload","cid","current_path","eventHandle","uploadStatus","t","useTranslation","useDropzone","onDrop","acceptedFiles","_t","sessionStorage","getItem","Config","targetUrl","Utils","file","formData","FormData","append","name","onUploadProgress","progressEvent","lengthComputable","percentCompleted","Math","round","loaded","total","onUploadStart","post","then","onUploadSuccess","catch","err","onUploadError","toaster","danger","getRootProps","getInputProps","isDragActive","isFocused","useMemo","isUploading","percent","DoubleChevronUpIcon","size","Strong","UploadIcon","Tooltip","content","InfoSignIcon","marginLeft","verticalAlign","FileModeIsDir","IsDir","mode","IsSymbolLink","DownloadingFile","status","dataSize","dataUnit","toFixed","Badge","color","marginBottom","Pill","isSolid","DocumentIcon","GridFileItem","f","sftpConnId","currentPath","onPathChange","dlStatus","dlEvent","onGridFileDoubleClicked","fileItem","onGridItemClicked","dlUrl","onDownloadStart","onDlProgress","onDownloadProgress","Promise","resolve","reject","method","responseType","error","toString","buffer","onDownloadFinish","blob","Blob","type","saveAs","onDoubleClick","FolderCloseIcon","clearTimeout","detail","setTimeout","DocumentOpenIcon","isDownloading","filename","HOME","DefaultFileList","loading","GridFileView","fileList","onPathChanged","uploadEvent","strSettings","localStorage","useState","showHiddenFile","setShowHiddenFiles","onPath","lsCmd","children","Card","backgroundColor","elevation","minHeight","display","flexDirection","padding","margin","Pane","flex","Popover","position","Position","BOTTOM_LEFT","Menu","Group","Item","icon","EyeOffIcon","EyeOnIcon","onSelect","setItem","IconButton","CogIcon","iconSize","sort","a","b","dir_only","item","ls_error","callback","get","response","has_error","messages","message","ele","is_dir","push","e","FileTrans","isShown","node","sshStatus","hideSideSheeeet","isSftpActive","setSftpActive","sftpConnLoading","setSftpConnLoading","setSftpConnId","setFileList","display_path","setCurentPath","hasError","setUploadStatus","setDlStatus","handleFileUploading","success","console","log","handleFileDownload","SideSheet","shouldCloseOnEscapePress","onCloseComplete","containerProps","zIndex","flexShrink","borderBottom","Heading","Paragraph","username","ConnectionAlive","overflowY","Alert","border","alignItems","justifyContent","isLoading","socket","WebSocket","onmessage","JSON","parse","heartBeatTimer","setInterval","send","stringify","onclose","clearInterval","sshWebSocket","bindTerminal","term","websocket","bidirectional","bufferedTime","messageBuffer","handleWebSocketMessage","ev","ArrayBuffer","write","Uint8Array","dataListener","base64","Base64","encode","addEventListener","removeEventListener","resize","bindTerminalResize","resizeListener","rows","cols","ConnectionStatus","Connecting","UngroupObjectsIcon","marginRight","isInteractive","textTransform","ConnectionLost","DisableIcon","FullCircleIcon","Console","isSideSheetShown","setSideSheetShwon","useRef","FitAddon","fitAddon","WebLinksAddon","webLinksAddon","fullscreen","setFullscreen","connecting","setConnecting","nodeConfig","setNodeConfig","showCornerDialog","setShowCornerDialog","ws","useEffect","lhost","luname","fit","writeln","history","Util","binaryType","onopen","setOption","removeItem","terminalResize","close","onWindowResize","closeWindowListener","preventDefault","returnValue","borderRadius","alignContent","textAlign","Divider","LogOutIcon","notify","id","Avatar","cursorBlink","bellStyle","Text","CornerDialog","ErrorIcon","hasClose","cancelLabel","confirmLabel","onConfirm","Portal","top","right","marginY","RefreshIcon","SwapVerticalIcon","FullscreenIcon","MinimizeIcon","global","home","switch_lang","error_occurs_try_refresh","welcome","goto_signin","files","upload_btn","uploading","upload_completed","upload_tooltip","show_hidden_files_menu","hide_hidden_files_menu","error_upload_fail_no_conneton","error_upload_fail_target_url","dl_text_preparing","dl_file_failed","file_transfer","ssh_not_active","connect_to_sftp_server","error_while_ls","error_download_file","empty_dir_or_no_sub_dir","upload_status_pending","upload_status_uploading","upload_status_def","upload_status_fail","wait_for_unload_finish","nav_doc","nav_hpcer","nav_project","nav_about","nav_user_exit","toolsbar_refresh","toolsbar_file_transfer","toolsbar_fullscreen","toolsbar_settings","toolsbar_exit_fullscreen","web_socket_disconnect","web_socket_expire","ssh_disconn_dialog_title","ssh_disconn_dialog_cancel_btn","ssh_disconn_dialog_confirm_btn","ssh_disconn_dialog_text","relogin","ecs_to_exit_fullscreen","modal_file_transfer_title","modal_file_transfer_ok_btn","make_sure_to_leave","signin","form_title","form_fullhost_label","form_fullhost_ph","form_username_label","form_username_ph","form_passwd_label","form_passwd_ph","form_submit_btn","form_submit_btn_loading","form_fullhost_required","form_fullhost_error","form_username_required","form_passwd_required","form_has_error","form_error_passport","form_error_remote_server","form_error_ssh_login","signin_success","empty_dir","resources","en","translation","getLang","navLang","navigator","language","localLang","i18n","use","initReactI18next","init","lng","fallbackLng","keySeparator","interpolation","escapeValue","SwitchLang","newLang","changeLanguage","Footer","is","target","href","iconBefore","GitRepoIcon","Header","to","checkHostFormat","hostList","isNaN","Number","parseInt","Signin","isInvalid","validationMessage","undefined","value","hostField","setHostField","unameField","setUnameField","passwdField","setPasswdField","submitLoading","setSubmitLoading","onHostChanged","trim","onUsernameChanged","onPasswdChanged","password","doSignin","ok","port","warning","closeAll","passwd","addition","marginTop","onSubmit","TextInputField","label","onChange","onBlur","placeholder","onKeyDown","key","stopPropagation","FormField","width","GeolocationIcon","MainPage","src","alt","Home","exact","component","App","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","getElementById","URL","origin","fetch","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.39a146ea.chunk.js","sourcesContent":["// This file is copied from: https://github.com/robert-harbison/xterm-for-react\r\nimport * as React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport 'xterm/css/xterm.css'\r\n\r\n// We are using these as types.\r\n// eslint-disable-next-line no-unused-vars\r\nimport { Terminal, ITerminalOptions, ITerminalAddon } from 'xterm'\r\n\r\ninterface IProps {\r\n  /**\r\n   * Class name to add to the terminal container.\r\n   */\r\n  className?: string\r\n\r\n  /**\r\n   * Options to initialize the terminal with.\r\n   */\r\n  options?: ITerminalOptions\r\n\r\n  /**\r\n   * An array of XTerm addons to load along with the terminal.\r\n   */\r\n  addons?: Array<ITerminalAddon>\r\n\r\n  /**\r\n   * Adds an event listener for when a binary event fires. This is used to\r\n   * enable non UTF-8 conformant binary messages to be sent to the backend.\r\n   * Currently this is only used for a certain type of mouse reports that\r\n   * happen to be not UTF-8 compatible.\r\n   * The event value is a JS string, pass it to the underlying pty as\r\n   * binary data, e.g. `pty.write(Buffer.from(data, 'binary'))`.\r\n   */\r\n  onBinary?(data: string): void\r\n\r\n  /**\r\n   * Adds an event listener for the cursor moves.\r\n   */\r\n  onCursorMove?(): void\r\n\r\n  /**\r\n   * Adds an event listener for when a data event fires. This happens for\r\n   * example when the user types or pastes into the terminal. The event value\r\n   * is whatever `string` results, in a typical setup, this should be passed\r\n   * on to the backing pty.\r\n   */\r\n  onData?(data: string): void\r\n\r\n  /**\r\n   * Adds an event listener for when a key is pressed. The event value contains the\r\n   * string that will be sent in the data event as well as the DOM event that\r\n   * triggered it.\r\n   */\r\n  onKey?(event: { key: string; domEvent: KeyboardEvent }): void\r\n\r\n  /**\r\n   * Adds an event listener for when a line feed is added.\r\n   */\r\n  onLineFeed?(): void\r\n\r\n  /**\r\n   * Adds an event listener for when a scroll occurs. The event value is the\r\n   * new position of the viewport.\r\n   * @returns an `IDisposable` to stop listening.\r\n   */\r\n  onScroll?(newPosition: number): void\r\n\r\n  /**\r\n   * Adds an event listener for when a selection change occurs.\r\n   */\r\n  onSelectionChange?(): void\r\n\r\n  /**\r\n   * Adds an event listener for when rows are rendered. The event value\r\n   * contains the start row and end rows of the rendered area (ranges from `0`\r\n   * to `Terminal.rows - 1`).\r\n   */\r\n  onRender?(event: { start: number; end: number }): void\r\n\r\n  /**\r\n   * Adds an event listener for when the terminal is resized. The event value\r\n   * contains the new size.\r\n   */\r\n  onResize?(event: { cols: number; rows: number }): void\r\n\r\n  /**\r\n   * Adds an event listener for when an OSC 0 or OSC 2 title change occurs.\r\n   * The event value is the new title.\r\n   */\r\n  onTitleChange?(newTitle: string): void\r\n\r\n  /**\r\n   * Attaches a custom key event handler which is run before keys are\r\n   * processed, giving consumers of xterm.js ultimate control as to what keys\r\n   * should be processed by the terminal and what keys should not.\r\n   *\r\n   * @param event The custom KeyboardEvent handler to attach.\r\n   * This is a function that takes a KeyboardEvent, allowing consumers to stop\r\n   * propagation and/or prevent the default action. The function returns\r\n   * whether the event should be processed by xterm.js.\r\n   */\r\n  customKeyEventHandler?(event: KeyboardEvent): boolean\r\n}\r\n\r\nexport default class Xterm extends React.Component<IProps> {\r\n  /**\r\n   * The ref for the containing element.\r\n   */\r\n  terminalRef: React.RefObject<HTMLDivElement>\r\n\r\n  /**\r\n   * XTerm.js Terminal object.\r\n   */\r\n  terminal!: Terminal // This is assigned in the setupTerminal() which is called from the constructor\r\n\r\n  static propTypes = {\r\n    className: PropTypes.string,\r\n    options: PropTypes.object,\r\n    addons: PropTypes.array,\r\n    onBinary: PropTypes.func,\r\n    onCursorMove: PropTypes.func,\r\n    onData: PropTypes.func,\r\n    onKey: PropTypes.func,\r\n    onLineFeed: PropTypes.func,\r\n    onScroll: PropTypes.func,\r\n    onSelectionChange: PropTypes.func,\r\n    onRender: PropTypes.func,\r\n    onResize: PropTypes.func,\r\n    onTitleChange: PropTypes.func,\r\n    customKeyEventHandler: PropTypes.func,\r\n  }\r\n\r\n  constructor(props: IProps) {\r\n    super(props)\r\n\r\n    this.terminalRef = React.createRef()\r\n\r\n    // Bind Methods\r\n    this.onData = this.onData.bind(this)\r\n    this.onCursorMove = this.onCursorMove.bind(this)\r\n    this.onKey = this.onKey.bind(this)\r\n    this.onBinary = this.onBinary.bind(this)\r\n    this.onLineFeed = this.onLineFeed.bind(this)\r\n    this.onScroll = this.onScroll.bind(this)\r\n    this.onSelectionChange = this.onSelectionChange.bind(this)\r\n    this.onRender = this.onRender.bind(this)\r\n    this.onResize = this.onResize.bind(this)\r\n    this.onTitleChange = this.onTitleChange.bind(this)\r\n\r\n    this.setupTerminal()\r\n  }\r\n\r\n  setupTerminal() {\r\n    // Setup the XTerm terminal.\r\n    this.terminal = new Terminal(this.props.options)\r\n\r\n    // Load addons if the prop exists.\r\n    if (this.props.addons) {\r\n      this.props.addons.forEach((addon) => {\r\n        this.terminal.loadAddon(addon)\r\n      })\r\n    }\r\n\r\n    // Create Listeners\r\n    this.terminal.onBinary(this.onBinary)\r\n    this.terminal.onCursorMove(this.onCursorMove)\r\n    this.terminal.onData(this.onData)\r\n    this.terminal.onKey(this.onKey)\r\n    this.terminal.onLineFeed(this.onLineFeed)\r\n    this.terminal.onScroll(this.onScroll)\r\n    this.terminal.onSelectionChange(this.onSelectionChange)\r\n    this.terminal.onRender(this.onRender)\r\n    this.terminal.onResize(this.onResize)\r\n    this.terminal.onTitleChange(this.onTitleChange)\r\n\r\n    // Add Custom Key Event Handler\r\n    if (this.props.customKeyEventHandler) {\r\n      this.terminal.attachCustomKeyEventHandler(\r\n        this.props.customKeyEventHandler,\r\n      )\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.terminalRef.current) {\r\n      // Creates the terminal within the container element.\r\n      this.terminal.open(this.terminalRef.current)\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // When the component unmounts dispose of the terminal and all of its listeners.\r\n    this.terminal.dispose()\r\n  }\r\n\r\n  private onBinary(data: string) {\r\n    if (this.props.onBinary) this.props.onBinary(data)\r\n  }\r\n\r\n  private onCursorMove() {\r\n    if (this.props.onCursorMove) this.props.onCursorMove()\r\n  }\r\n\r\n  private onData(data: string) {\r\n    if (this.props.onData) this.props.onData(data)\r\n  }\r\n\r\n  private onKey(event: { key: string; domEvent: KeyboardEvent }) {\r\n    if (this.props.onKey) this.props.onKey(event)\r\n  }\r\n\r\n  private onLineFeed() {\r\n    if (this.props.onLineFeed) this.props.onLineFeed()\r\n  }\r\n\r\n  private onScroll(newPosition: number) {\r\n    if (this.props.onScroll) this.props.onScroll(newPosition)\r\n  }\r\n\r\n  private onSelectionChange() {\r\n    if (this.props.onSelectionChange) this.props.onSelectionChange()\r\n  }\r\n\r\n  private onRender(event: { start: number; end: number }) {\r\n    if (this.props.onRender) this.props.onRender(event)\r\n  }\r\n\r\n  private onResize(event: { cols: number; rows: number }) {\r\n    if (this.props.onResize) this.props.onResize(event)\r\n  }\r\n\r\n  private onTitleChange(newTitle: string) {\r\n    if (this.props.onTitleChange) this.props.onTitleChange(newTitle)\r\n  }\r\n\r\n  render() {\r\n    return <div className={this.props.className} ref={this.terminalRef} />\r\n  }\r\n}\r\n","const abcTheme = {\r\n  foreground: '#ffffff',\r\n  background: '#000000',\r\n  cursor: '#ffffff',\r\n  selection: 'rgba(255, 255, 255, 0.3)',\r\n  black: '#000000',\r\n  brightBlack: '#808080',\r\n  red: '#e06c75',\r\n  brightRed: '#e06c75',\r\n  green: '#A4EFA1',\r\n  brightGreen: '#A4EFA1',\r\n  yellow: '#EDDC96',\r\n  brightYellow: '#EDDC96',\r\n  magenta: '#e39ef7',\r\n  brightMagenta: '#e39ef7',\r\n  blue: '#5fcbd8',\r\n  brightBlue: '#5fcbd8',\r\n  cyan: '#5fcbd8',\r\n  brightCyan: '#5fcbd8',\r\n  white: '#d0d0d0',\r\n  brightWhite: '#ffffff',\r\n}\r\n\r\nconst defaultTheme = {\r\n  foreground: '#ffffff',\r\n  background: '#1b212f',\r\n  cursor: '#ffffff',\r\n  selection: 'rgba(255, 255, 255, 0.3)',\r\n  black: '#000000',\r\n  brightBlack: '#808080',\r\n  red: '#ce2f2b',\r\n  brightRed: '#f44a47',\r\n  green: '#00b976',\r\n  brightGreen: '#05d289',\r\n  yellow: '#e0d500',\r\n  brightYellow: '#f4f628',\r\n  magenta: '#bd37bc',\r\n  brightMagenta: '#d86cd8',\r\n  blue: '#1d6fca',\r\n  brightBlue: '#358bed',\r\n  cyan: '#00a8cf',\r\n  brightCyan: '#19b8dd',\r\n  white: '#e5e5e5',\r\n  brightWhite: '#ffffff',\r\n}\r\n\r\nconst theme = {\r\n  default_theme: defaultTheme,\r\n  abc_theme: abcTheme,\r\n}\r\n\r\nexport default theme\r\n","const config = {\r\n  net: {\r\n    protocol: 'http',\r\n    webSocketProtocol: 'ws://',\r\n    host: window.location.host,\r\n    isVPN: false,\r\n    midParams: '',\r\n    api_domain: process.env.REACT_APP_API_URL\r\n      ? process.env.REACT_APP_API_URL\r\n      : window.location.host,\r\n    vpnHost: 'vpn3.ustb.edu.cn',\r\n    vpnParame: process.env.REACT_APP_API_URL\r\n      ? ',DanaInfo=' + process.env.REACT_APP_API_URL + ',SSL' // todo port\r\n      : window.location.host,\r\n  },\r\n  jwt: {\r\n    tokenName: '_t',\r\n  },\r\n  router: {\r\n    basepath: process.env.REACT_APP_ROUTER_BASE\r\n      ? process.env.REACT_APP_ROUTER_BASE\r\n      : '',\r\n  },\r\n}\r\n\r\nconfig.net.protocol = window.location.protocol + '//'\r\nconfig.net.webSocketProtocol = process.env.REACT_APP_API_HTTPS\r\n  ? 'wss://'\r\n  : process.env.NODE_ENV !== 'development' &&\r\n    window.location.protocol === 'https:'\r\n  ? 'wss://'\r\n  : 'ws://' // todo add config.\r\n\r\nconfig.net.isVPN = (() => {\r\n  // if (config.env !== 'development' && window.location.host !== config.net.api_domain) {\r\n  //   return true // url += config.net.vpnParame\r\n  // }\r\n  if (process.env.NODE_ENV === 'production') {\r\n    return window.location.pathname.startsWith('/vpn')\r\n  }\r\n  return false\r\n})()\r\n\r\n// get target host when communicating with backend api.\r\nconfig.net.host = (() => {\r\n  if (config.net.isVPN) {\r\n    return config.net.vpnHost\r\n  } else {\r\n    return config.net.api_domain\r\n  }\r\n})()\r\n\r\n// please use midParams, instead of vpnParams.\r\nconfig.net.midParams = (() => {\r\n  if (config.net.isVPN) {\r\n    return config.net.vpnParame\r\n  } else {\r\n    return '' // empty by default\r\n  }\r\n})()\r\n\r\nexport default config\r\n","import React from 'react'\r\nimport {\r\n  DocumentIcon,\r\n  DocumentOpenIcon,\r\n  FolderCloseIcon,\r\n  Strong,\r\n  toaster,\r\n} from 'evergreen-ui'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { saveAs } from 'file-saver'\r\nimport axios from 'axios'\r\n\r\nimport Config from '../../config/config'\r\nimport Utils from '../../libs/utils'\r\nimport apiRouters from '../../config/api_routers'\r\nimport stringFormat from '../../libs/string_format'\r\nimport { CurrentPath, FileItem, IsDir, IsSymbolLink } from './files_types'\r\nimport DownloadingFile from './DownloadingFile'\r\n\r\nexport type DownloadStatus = {\r\n  isDownloading: boolean\r\n  loaded: number\r\n  total: number\r\n  filename: string\r\n  path: string\r\n}\r\n\r\nexport type DownloadEvent = {\r\n  onDownloadStart: (path: string, filename: string) => void\r\n  onDownloadProgress: (\r\n    loaded: number,\r\n    total: number,\r\n    path: string,\r\n    filename: string,\r\n  ) => void\r\n  onDownloadFinish: (path: string, filename: string) => void\r\n}\r\n\r\ninterface GridFileItemProps {\r\n  f: FileItem\r\n  sftpConnId: string\r\n  currentPath: CurrentPath\r\n  onPathChange: (path: string) => void\r\n  dlStatus: DownloadStatus\r\n  dlEvent: DownloadEvent\r\n}\r\n\r\nlet timer: NodeJS.Timeout\r\n\r\n// GridFileItem display a file item in grid view of files.\r\n// the file item can be directory, or normal file, or symbolic link.\r\nconst GridFileItem = ({\r\n  f,\r\n  sftpConnId,\r\n  currentPath,\r\n  onPathChange,\r\n  dlStatus,\r\n  dlEvent,\r\n}: GridFileItemProps) => {\r\n  const { t } = useTranslation(['console', 'files'])\r\n\r\n  const onGridFileDoubleClicked = (fileItem: FileItem) => {\r\n    if (IsDir(fileItem) || IsSymbolLink(fileItem)) {\r\n      // todo: set loading\r\n      onPathChange(fileItem.path)\r\n    }\r\n  }\r\n\r\n  const getFileBlob = (\r\n    url: string,\r\n    // eslint-disable-next-line\r\n    onDlProgress: (progressEvent: any) => void,\r\n  ) => {\r\n    return new Promise<ArrayBuffer>((resolve, reject) => {\r\n      axios({\r\n        method: 'get',\r\n        url,\r\n        responseType: 'arraybuffer',\r\n        onDownloadProgress: onDlProgress,\r\n      })\r\n        .then((data) => {\r\n          resolve(data.data)\r\n        })\r\n        .catch((error) => {\r\n          reject(error.toString())\r\n        })\r\n    })\r\n  }\r\n\r\n  const onGridItemClicked = (fileItem: FileItem) => {\r\n    if (!IsDir(fileItem)) {\r\n      const path = fileItem.path\r\n      const _t = sessionStorage.getItem(Config.jwt.tokenName)\r\n      if (_t) {\r\n        const dlUrl = Utils.loadUrl(\r\n          apiRouters.router.sftp_dl,\r\n          stringFormat.format(apiRouters.params.sftp_dl, _t, sftpConnId, path),\r\n        )\r\n        dlEvent.onDownloadStart(currentPath.current_path, fileItem.name)\r\n        // eslint-disable-next-line\r\n        getFileBlob(dlUrl, (progressEvent: any) => {\r\n          // on download progress event\r\n          if (progressEvent.lengthComputable) {\r\n            dlEvent.onDownloadProgress(\r\n              progressEvent.loaded,\r\n              progressEvent.total,\r\n              currentPath.current_path,\r\n              fileItem.name,\r\n            )\r\n          } else {\r\n            dlEvent.onDownloadProgress(\r\n              progressEvent.loaded,\r\n              0,\r\n              currentPath.current_path,\r\n              fileItem.name,\r\n            )\r\n          }\r\n        })\r\n          .then((buffer: ArrayBuffer) => {\r\n            dlEvent.onDownloadFinish(currentPath.current_path, fileItem.name)\r\n            const blob = new Blob([buffer], {\r\n              type: 'application/octet-stream',\r\n            })\r\n            saveAs(blob, fileItem.name)\r\n          })\r\n          .catch(() => {\r\n            // download error\r\n            toaster.danger(t('files:dl_file_failed'))\r\n            dlEvent.onDownloadFinish(currentPath.current_path, fileItem.name)\r\n          })\r\n      }\r\n    }\r\n  }\r\n\r\n  if (IsDir(f)) {\r\n    return (\r\n      <a\r\n        className=\"overview-item overview-item-flex\"\r\n        onDoubleClick={() => {\r\n          onGridFileDoubleClicked(f)\r\n        }}>\r\n        <FolderCloseIcon size={32} className=\"item-icon\" />\r\n        <Strong size={300} title={f.name} className=\"item-title\">\r\n          {f.name}\r\n        </Strong>\r\n      </a>\r\n    )\r\n  } else if (IsSymbolLink(f)) {\r\n    return (\r\n      <a\r\n        className=\"overview-item overview-item-flex\"\r\n        onClick={(event) => {\r\n          clearTimeout(timer)\r\n          if (event.detail === 1) {\r\n            timer = setTimeout(() => {\r\n              onGridItemClicked(f)\r\n            }, 200)\r\n          } else if (event.detail === 2) {\r\n            onGridFileDoubleClicked(f)\r\n          }\r\n        }}>\r\n        <DocumentOpenIcon size={32} className=\"item-icon\" />\r\n        <Strong size={300} title={f.name} className=\"item-title\">\r\n          {f.name}\r\n        </Strong>\r\n      </a>\r\n    )\r\n  } else {\r\n    // file\r\n    if (\r\n      dlStatus.isDownloading &&\r\n      dlStatus.filename === f.name &&\r\n      dlStatus.path === currentPath.current_path\r\n    ) {\r\n      return <DownloadingFile status={dlStatus} file={f} />\r\n    }\r\n    return (\r\n      <a\r\n        className=\"overview-item overview-item-flex\"\r\n        onClick={() => {\r\n          onGridItemClicked(f)\r\n        }}>\r\n        <DocumentIcon size={32} className=\"item-icon\" />\r\n        <Strong size={300} title={f.name} className=\"item-title\">\r\n          {f.name}\r\n        </Strong>\r\n      </a>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GridFileItem\r\n","import React, { useState } from 'react'\r\nimport {\r\n  Alert,\r\n  Button,\r\n  IconButton,\r\n  Card,\r\n  Heading,\r\n  Menu,\r\n  Pane,\r\n  Paragraph,\r\n  Popover,\r\n  Position,\r\n  SideSheet,\r\n  toaster,\r\n} from 'evergreen-ui'\r\nimport { CogIcon, EyeOnIcon, EyeOffIcon } from 'evergreen-ui'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport Config from '../config/config'\r\nimport Utils from '../libs/utils'\r\nimport apiRouters from '../config/api_routers'\r\nimport stringFormat from '../libs/string_format'\r\nimport PathNav, { SPLIT_CHAR } from './PathNav'\r\nimport SftpUpload, { UploadEvent, UploadStatus } from './SftpUpload'\r\nimport './file_trans.less'\r\nimport GriFileItem, {\r\n  DownloadEvent,\r\n  DownloadStatus,\r\n} from './files/GridFileItem'\r\nimport {\r\n  FileItem,\r\n  FileModeEmpty,\r\n  FileModeIsDir,\r\n  FileModeNormalFile,\r\n  IsDir,\r\n  CurrentPath,\r\n} from './files/files_types'\r\n\r\nconst HOME = 'HOME'\r\n\r\nexport enum ConnStatus {\r\n  Connecting = 1,\r\n  ConnectionAlive,\r\n  ConnectionLost,\r\n}\r\n\r\nexport interface NodeConfig {\r\n  host: string\r\n  username: string\r\n}\r\n\r\ninterface SideSftpProps {\r\n  isShown: boolean\r\n  node: NodeConfig\r\n  sshStatus: ConnStatus\r\n  hideSideSheeeet: () => void\r\n}\r\n\r\nconst DefaultFileList: Array<FileItem> = [\r\n  { name: HOME, path: '', mode: FileModeIsDir, loading: false },\r\n]\r\n\r\ninterface GridFileViewProps {\r\n  sftpConnId: string\r\n  fileList: Array<FileItem>\r\n  currentPath: CurrentPath\r\n  onPathChanged: (item: FileItem[], path: string, is_abs_path: boolean) => void\r\n  uploadEvent: UploadEvent\r\n  uploadStatus: UploadStatus\r\n  dlStatus: DownloadStatus\r\n  dlEvent: DownloadEvent\r\n}\r\n\r\nconst GridFileView = ({\r\n  sftpConnId,\r\n  fileList,\r\n  currentPath,\r\n  onPathChanged,\r\n  uploadEvent,\r\n  uploadStatus,\r\n  dlEvent,\r\n  dlStatus,\r\n}: GridFileViewProps) => {\r\n  const { t } = useTranslation(['console', 'files'])\r\n  const strSettings = window.localStorage.getItem('show-hidden-files')\r\n  const [showHiddenFile, setShowHiddenFiles] = useState<boolean>(\r\n    strSettings === 'on' ? true : false,\r\n  )\r\n\r\n  const toggleShowHiddenFile = () => {\r\n    window.localStorage.setItem(\r\n      'show-hidden-files',\r\n      !showHiddenFile ? 'on' : 'off',\r\n    )\r\n    setShowHiddenFiles(!showHiddenFile)\r\n  }\r\n\r\n  const onPath = (path: string) => {\r\n    // when the path is changed // todo add cache\r\n    if (path && path === currentPath.current_path) {\r\n      return // if it is the same path.\r\n    }\r\n    if (uploadStatus.isUploading) {\r\n      // if it is uploading.\r\n      toaster.danger(t('console:file_transfer.wait_for_unload_finish'))\r\n      return\r\n    }\r\n    const item: FileItem = {\r\n      name: '',\r\n      mode: FileModeIsDir,\r\n      path: path,\r\n      loading: false,\r\n    }\r\n    lsCmd(\r\n      sftpConnId,\r\n      false,\r\n      item,\r\n      (path: string) => {\r\n        toaster.danger(t('console:file_transfer.error_while_ls') + path)\r\n      },\r\n      (children: FileItem[], error: boolean) => {\r\n        if (!error) {\r\n          onPathChanged(children, path, path.startsWith(SPLIT_CHAR))\r\n        }\r\n      },\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Card\r\n      backgroundColor=\"white\"\r\n      elevation={0}\r\n      minHeight=\"calc(100% - 32px)\"\r\n      display=\"flex\"\r\n      flexDirection=\"column\"\r\n      padding=\"8px\"\r\n      margin={16}>\r\n      <Pane\r\n        marginBottom=\"0.4rem\"\r\n        className=\"path-nav\"\r\n        display=\"flex\"\r\n        flexDirection=\"row\">\r\n        <div style={{ flex: 1 }}>\r\n          <PathNav path={currentPath.current_path} onPathClick={onPath} />\r\n        </div>\r\n        <Popover\r\n          position={Position.BOTTOM_LEFT}\r\n          content={\r\n            <Menu>\r\n              <Menu.Group>\r\n                <Menu.Item\r\n                  icon={showHiddenFile ? EyeOffIcon : EyeOnIcon}\r\n                  onSelect={toggleShowHiddenFile}>\r\n                  {/* secondaryText={<>⌘R</>} */}\r\n                  {showHiddenFile\r\n                    ? t('files:hide_hidden_files_menu')\r\n                    : t('files:show_hidden_files_menu')}\r\n                </Menu.Item>\r\n              </Menu.Group>\r\n            </Menu>\r\n          }>\r\n          <IconButton appearance=\"minimal\" icon={CogIcon} iconSize={18} />\r\n        </Popover>\r\n      </Pane>\r\n      <div className=\"overview-group-items\">\r\n        {fileList\r\n          .sort((a, b) => {\r\n            if (IsDir(a) && !IsDir(b)) {\r\n              return -1\r\n            }\r\n            if (!IsDir(a) && IsDir(b)) {\r\n              return 1\r\n            }\r\n            return a.name == b.name ? 0 : a.name > b.name ? 1 : -1\r\n          })\r\n          .map((f: FileItem) => {\r\n            if (!showHiddenFile && f.name.startsWith('.')) {\r\n              return null\r\n            }\r\n\r\n            return (\r\n              <GriFileItem\r\n                key={f.name}\r\n                f={f}\r\n                currentPath={currentPath}\r\n                dlEvent={dlEvent}\r\n                dlStatus={dlStatus}\r\n                onPathChange={onPath}\r\n                sftpConnId={sftpConnId}\r\n              />\r\n            )\r\n          })}\r\n        <SftpUpload\r\n          eventHandle={uploadEvent}\r\n          uploadStatus={uploadStatus}\r\n          cid={sftpConnId}\r\n          current_path={currentPath.current_path}\r\n        />\r\n      </div>\r\n    </Card>\r\n  )\r\n}\r\n\r\n// dir_only means only to show directory\r\nconst lsCmd = (\r\n  sftpConnId: string,\r\n  dir_only: boolean,\r\n  item: FileItem,\r\n  ls_error: (path: string) => void,\r\n  callback: (items: FileItem[], error: boolean) => void,\r\n) => {\r\n  // item.is_dir === true.\r\n  const path = item.path\r\n  const _t = sessionStorage.getItem(Config.jwt.tokenName)\r\n  if (_t) {\r\n    Utils.axiosInstance\r\n      .get(\r\n        Utils.loadUrl(\r\n          apiRouters.router.sftp_ls,\r\n          stringFormat.format(\r\n            apiRouters.params.sftp_ls,\r\n            _t,\r\n            sftpConnId,\r\n            dir_only + '',\r\n            path,\r\n          ),\r\n        ),\r\n        {},\r\n      )\r\n      .then((response) => {\r\n        try {\r\n          if (!response.data || response.data.has_error) {\r\n            ls_error(path)\r\n            // todo dir not shown\r\n            const d: Array<FileItem> = []\r\n            callback(d, true)\r\n          } else {\r\n            const messages = response.data.message\r\n            const children: Array<FileItem> = []\r\n            // eslint-disable-next-line\r\n            messages.forEach((ele: any) => {\r\n              if (dir_only && !ele.is_dir) {\r\n                return\r\n              }\r\n              children.push({\r\n                name: ele.name,\r\n                mode: ele.mode,\r\n                path: ele.path,\r\n                loading: false,\r\n                children: [],\r\n              })\r\n            })\r\n            callback(children, false) // only callback here todo handle error for loading.\r\n          }\r\n        } catch (e) {\r\n          ls_error(path)\r\n          const d: Array<FileItem> = []\r\n          callback(d, true)\r\n        }\r\n      })\r\n  }\r\n}\r\n\r\n// Here to open sftp connection and manager its status\r\nconst FileTrans = ({\r\n  isShown,\r\n  node,\r\n  sshStatus,\r\n  hideSideSheeeet,\r\n}: SideSftpProps) => {\r\n  const [isSftpActive, setSftpActive] = useState<boolean>(false)\r\n  const [sftpConnLoading, setSftpConnLoading] = useState<boolean>(false)\r\n  const [sftpConnId, setSftpConnId] = useState<string>('')\r\n\r\n  const [fileList, setFileList] = useState<Array<FileItem>>(DefaultFileList)\r\n  const [currentPath, setCurentPath] = useState<CurrentPath>({\r\n    current_path: '',\r\n    display_path: HOME,\r\n  })\r\n  const [uploadStatus, setUploadStatus] = useState<UploadStatus>({\r\n    isUploading: false,\r\n    hasError: false,\r\n    percent: 0,\r\n  })\r\n  const [dlStatus, setDlStatus] = useState<DownloadStatus>({\r\n    isDownloading: false,\r\n    loaded: 0,\r\n    total: 0,\r\n    path: '',\r\n    filename: '',\r\n  })\r\n\r\n  const { t } = useTranslation(['console'])\r\n  // fixme: close websocket when isSftpActive changed to false\r\n\r\n  // eslint-disable-next-line\r\n  const ls = (\r\n    item: FileItem,\r\n    // eslint-disable-next-line\r\n    callback: (items: FileItem[], error: boolean) => void,\r\n  ) => {\r\n    lsCmd(\r\n      sftpConnId,\r\n      true,\r\n      item,\r\n      (path: string) => {\r\n        toaster.danger(t('console:file_transfer.error_while_ls') + path)\r\n      },\r\n      (children: FileItem[], error: boolean) => {\r\n        // todo empty-text\r\n        if (!error && children.length === 0) {\r\n          // remove expand icon.\r\n          children.push({\r\n            name: '[empty]',\r\n            mode: FileModeEmpty,\r\n            path: '',\r\n            loading: false,\r\n          })\r\n        }\r\n      },\r\n    )\r\n  }\r\n\r\n  const setGridByFilePath = (\r\n    children: Array<FileItem>,\r\n    path: string,\r\n    is_abs_path: boolean,\r\n  ) => {\r\n    setFileList(() => {\r\n      return [...children]\r\n    }) // todo add time, data?\r\n    if (is_abs_path) {\r\n      setCurentPath({ current_path: path, display_path: path })\r\n    } else {\r\n      setCurentPath({\r\n        current_path: path,\r\n        display_path: '$' + HOME + '/' + path,\r\n      })\r\n    }\r\n  }\r\n\r\n  const openSftpConnection = () => {\r\n    const _t = sessionStorage.getItem(Config.jwt.tokenName)\r\n    if (_t === null) {\r\n      toaster.danger(t('console:web_socket_expire'))\r\n      return\r\n    }\r\n\r\n    setSftpConnLoading(true)\r\n    const socket = new WebSocket(\r\n      Utils.loadWebSocketUrl(\r\n        apiRouters.router.ws_sftp,\r\n        stringFormat.format(apiRouters.params.ws_sftp, _t),\r\n      ),\r\n    )\r\n    // this.sftpSocket = socket; //todo\r\n    setSftpConnLoading(false)\r\n    setSftpActive(true)\r\n\r\n    socket.onmessage = (event) => {\r\n      // bind webSocket message event\r\n      const message = JSON.parse(event.data)\r\n      switch (message.type) {\r\n        case apiRouters.CID:\r\n          setSftpConnId(message.data)\r\n          break\r\n      }\r\n    }\r\n\r\n    const heartBeatTimer = setInterval(() => {\r\n      socket.send(JSON.stringify({ type: 'heartbeat', data: '' }))\r\n    }, 20 * 1000)\r\n\r\n    // bind webSocket close event\r\n    socket.onclose = () => {\r\n      setSftpActive(false)\r\n      clearInterval(heartBeatTimer) // cancel heartbeat package sending.\r\n    }\r\n  }\r\n\r\n  const handleFileUploading = {\r\n    onUploadSuccess: (filename: string) => {\r\n      const item = {\r\n        path: currentPath + SPLIT_CHAR + filename,\r\n        name: filename,\r\n        mode: FileModeNormalFile,\r\n        loading: false,\r\n        children: [],\r\n      }\r\n      setUploadStatus({ isUploading: false, hasError: false, percent: 0 })\r\n      setFileList(() => {\r\n        return [...fileList, item]\r\n      })\r\n      toaster.success('Upload success!')\r\n    },\r\n    onUploadStart: () => {\r\n      setUploadStatus({ isUploading: true, hasError: false, percent: 0 })\r\n    },\r\n    onUploadProgress: (percent: number) => {\r\n      setUploadStatus({ isUploading: true, hasError: false, percent: percent })\r\n      console.log(percent)\r\n    },\r\n    onUploadError: () => {\r\n      setUploadStatus({ isUploading: false, hasError: true, percent: 0 })\r\n      toaster.danger('File upload error')\r\n    },\r\n  }\r\n\r\n  const handleFileDownload = {\r\n    onDownloadStart: (path: string, filename: string) => {\r\n      setDlStatus({\r\n        isDownloading: true,\r\n        loaded: 0,\r\n        total: 0,\r\n        path: path,\r\n        filename: filename,\r\n      })\r\n    },\r\n    onDownloadProgress: (\r\n      loaded: number,\r\n      total: number,\r\n      path: string,\r\n      filename: string,\r\n    ) => {\r\n      setDlStatus({\r\n        isDownloading: true,\r\n        loaded: loaded,\r\n        total: total,\r\n        path: path,\r\n        filename: filename,\r\n      })\r\n    },\r\n    onDownloadFinish: () => {\r\n      setDlStatus({\r\n        isDownloading: false,\r\n        loaded: 0,\r\n        total: 0,\r\n        path: '',\r\n        filename: '',\r\n      })\r\n    },\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SideSheet\r\n        isShown={isShown}\r\n        shouldCloseOnEscapePress\r\n        onCloseComplete={hideSideSheeeet}\r\n        containerProps={{\r\n          display: 'flex',\r\n          flex: '1',\r\n          flexDirection: 'column',\r\n        }}>\r\n        <Pane zIndex={1} flexShrink={0} elevation={0} backgroundColor=\"white\">\r\n          <Pane padding={16} borderBottom=\"muted\">\r\n            <Heading size={600}>SFTP</Heading>\r\n            <Paragraph size={400} color=\"muted\">\r\n              {node.username}@{node.host}\r\n            </Paragraph>\r\n          </Pane>\r\n        </Pane>\r\n        {(sshStatus !== ConnStatus.ConnectionAlive || !isSftpActive) && (\r\n          <Pane flex=\"1\" overflowY=\"scroll\" background=\"tint1\" padding={16}>\r\n            {sshStatus !== ConnStatus.ConnectionAlive && (\r\n              <Alert\r\n                intent=\"warning\"\r\n                title={t('console:file_transfer.ssh_not_active')}\r\n                marginBottom={32}\r\n              />\r\n            )}\r\n            {sshStatus === ConnStatus.ConnectionAlive && !isSftpActive && (\r\n              <Pane\r\n                backgroundColor=\"transparent\"\r\n                elevation={0}\r\n                border=\"none\"\r\n                boxShadow=\"none\"\r\n                display=\"flex\"\r\n                alignItems=\"center\"\r\n                justifyContent=\"center\">\r\n                <Button\r\n                  isLoading={sftpConnLoading}\r\n                  intent=\"success\"\r\n                  onClick={openSftpConnection}>\r\n                  {t('console:file_transfer.connect_to_sftp_server')}\r\n                </Button>\r\n              </Pane>\r\n            )}\r\n          </Pane>\r\n        )}\r\n        {sshStatus === ConnStatus.ConnectionAlive && isSftpActive && (\r\n          // use margin(in GridFileView), instead padding due to browser compatibility on firefox.\r\n          <Pane flex=\"1\" overflowY=\"scroll\" background=\"tint1\">\r\n            <GridFileView\r\n              key=\"grid_view\"\r\n              uploadEvent={handleFileUploading}\r\n              uploadStatus={uploadStatus}\r\n              dlEvent={handleFileDownload}\r\n              dlStatus={dlStatus}\r\n              fileList={fileList}\r\n              sftpConnId={sftpConnId}\r\n              currentPath={currentPath}\r\n              onPathChanged={setGridByFilePath}\r\n            />\r\n          </Pane>\r\n        )}\r\n      </SideSheet>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default FileTrans\r\n","import axios from 'axios'\r\nimport config from '../config/config'\r\n\r\nconst util = {\r\n  title: (title: string) => {\r\n    title = title ? title + ' - SSH Web Console' : 'SSh Web Console'\r\n    window.document.title = title\r\n  },\r\n  // url: relative url starting with '/'\r\n  loadUrl: (url: string, params: string | null) => {\r\n    url = config.net.protocol + config.net.host + url + config.net.midParams\r\n    return params ? url + '?' + params : url\r\n  },\r\n  // url: relative url starting with '/'\r\n  loadWebSocketUrl: (url: string, params: string) => {\r\n    const protocol = config.net.webSocketProtocol\r\n    url = protocol + config.net.host + url + config.net.midParams\r\n    return params ? url + '?' + params : url\r\n  },\r\n\r\n  // const ajaxUrl = config.env === 'development' ?\r\n  //     'http://127.0.0.1:80' :\r\n  //     config.env === 'production' ?\r\n  //     'http://' + util.config.Domain:\r\n  //     'https://debug.url.com'; //todo\r\n  axiosInstance: axios.create({\r\n    timeout: 30000,\r\n    transformRequest: [\r\n      function (data) {\r\n        // Do whatever you want to transform the data\r\n        let ret = ''\r\n        for (const it in data) {\r\n          ret +=\r\n            encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n        }\r\n        return ret\r\n      },\r\n    ],\r\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n  }),\r\n}\r\n\r\nexport default util\r\n","import config from './config'\r\n\r\nconst apiRouters = {\r\n  router: {\r\n    sign_in: '/api/signin',\r\n    ws_ssh: '/ws/ssh',\r\n    ws_sftp: '/ws/sftp',\r\n    sftp_dl: '/api/sftp/dl',\r\n    sftp_ls: '/api/sftp/ls',\r\n    sftp_upload: '/api/sftp/upload',\r\n  },\r\n  params: {\r\n    ws_ssh: 'cols={{0}}&rows={{1}}&' + config.jwt.tokenName + '={{2}}',\r\n    ws_sftp: config.jwt.tokenName + '={{0}}',\r\n    sftp_dl: config.jwt.tokenName + '={{0}}&cid={{1}}&path={{2}}',\r\n    sftp_ls:\r\n      config.jwt.tokenName + '={{0}}&cid={{1}}&dir_only={{2}}&path={{3}}',\r\n    sftp_upload: config.jwt.tokenName + '={{0}}&cid={{1}}&path={{2}}',\r\n  },\r\n  CID: 'cid',\r\n}\r\n\r\nexport default apiRouters\r\n","const stringFormat = {\r\n  format: function (str: string, ...arr: Array<string>) {\r\n    // const a =\r\n    //   typeof arr === \"object\"\r\n    //     ? arr\r\n    //     : Array.prototype.slice.call(arguments).slice(1);\r\n    return str.replace(/\\{{([0-9]+)\\}}/g, function (_, index) {\r\n      return arr[index]\r\n    })\r\n  },\r\n}\r\n\r\nexport default stringFormat\r\n","import React from 'react'\r\nimport { Button, HomeIcon, SlashIcon } from 'evergreen-ui'\r\n\r\nexport const SPLIT_CHAR = '/'\r\n\r\ninterface PathNavProps {\r\n  path: string\r\n  onPathClick: (path: string) => void\r\n}\r\n\r\nconst PathNav = ({ path, onPathClick }: PathNavProps) => {\r\n  const is_abs_path = path.startsWith(SPLIT_CHAR)\r\n  const dirs = path.replace(/^\\/+|\\/+$/g, '').split(SPLIT_CHAR)\r\n  const onItemClicked = (i: number) => {\r\n    if (i >= dirs.length) {\r\n      return\r\n    }\r\n    if (i == -1) {\r\n      if (is_abs_path) {\r\n        onPathClick(SPLIT_CHAR) // root dir\r\n      } else {\r\n        onPathClick('')\r\n      }\r\n      return\r\n    }\r\n    const dirs_dp = dirs.slice()\r\n    dirs_dp.splice(i + 1) // remove left ones\r\n    let selected_path = dirs_dp.join(SPLIT_CHAR)\r\n    if (is_abs_path) {\r\n      selected_path = SPLIT_CHAR + selected_path\r\n    }\r\n    onPathClick(selected_path)\r\n  }\r\n  return (\r\n    <>\r\n      {is_abs_path && (\r\n        <Button\r\n          onClick={() => onItemClicked(-1)}\r\n          height={24}\r\n          paddingLeft=\"4px\"\r\n          paddingRight=\"4px\"\r\n          appearance=\"minimal\"\r\n          intent=\"none\">\r\n          <SlashIcon />\r\n        </Button>\r\n      )}\r\n      {!is_abs_path && (\r\n        <>\r\n          <Button\r\n            onClick={() => onItemClicked(-1)}\r\n            height={24}\r\n            paddingLeft=\"4px\"\r\n            paddingRight=\"4px\"\r\n            appearance=\"minimal\"\r\n            intent=\"none\">\r\n            <HomeIcon />\r\n          </Button>\r\n        </>\r\n      )}\r\n      {dirs.map((dir, i) => {\r\n        return (\r\n          <>\r\n            <span style={{ fontSize: '12px' }}>{SPLIT_CHAR}</span>\r\n            <Button\r\n              onClick={() => onItemClicked(i)}\r\n              height={24}\r\n              paddingLeft=\"4px\"\r\n              paddingRight=\"4px\"\r\n              appearance=\"minimal\"\r\n              intent=\"none\">\r\n              {dir}\r\n            </Button>\r\n          </>\r\n        )\r\n      })}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PathNav\r\n","import React, { useMemo } from 'react'\r\nimport { useDropzone } from 'react-dropzone'\r\nimport {\r\n  Strong,\r\n  Tooltip,\r\n  UploadIcon,\r\n  InfoSignIcon,\r\n  toaster,\r\n  DoubleChevronUpIcon,\r\n} from 'evergreen-ui'\r\nimport { useTranslation } from 'react-i18next'\r\nimport axios from 'axios'\r\n\r\nimport Config from '../config/config'\r\nimport Utils from '../libs/utils'\r\nimport apiRouters from '../config/api_routers'\r\nimport stringFormat from '../libs/string_format'\r\nimport './sftp_upload.less'\r\nimport './file_trans.less'\r\n\r\nconst activeStyle = {\r\n  style: {\r\n    boxShadow: '0 0 0 2px #016cd1',\r\n  },\r\n}\r\n\r\nexport type UploadEvent = {\r\n  onUploadSuccess: (filename: string) => void\r\n  onUploadStart: () => void\r\n  onUploadProgress: (percent: number) => void\r\n  onUploadError: (e: Error) => void\r\n}\r\n\r\nexport type UploadStatus = {\r\n  isUploading: boolean\r\n  percent: number\r\n  hasError: boolean\r\n}\r\n\r\ninterface UploadProps {\r\n  cid: string\r\n  current_path: string\r\n  uploadStatus: UploadStatus\r\n  eventHandle: UploadEvent\r\n}\r\n\r\nconst SftpUpload = ({\r\n  cid,\r\n  current_path,\r\n  eventHandle,\r\n  uploadStatus,\r\n}: UploadProps) => {\r\n  const { t } = useTranslation(['files'])\r\n\r\n  const onDrop = (acceptedFiles: File[]) => {\r\n    const _t = sessionStorage.getItem(Config.jwt.tokenName)\r\n    if (!cid || cid === '') {\r\n      toaster.danger(t('files:error_upload_fail_no_conneton'))\r\n      return\r\n    }\r\n    let targetUrl = ''\r\n    if (_t) {\r\n      targetUrl = Utils.loadUrl(\r\n        apiRouters.router.sftp_upload,\r\n        stringFormat.format(\r\n          apiRouters.params.sftp_upload,\r\n          _t,\r\n          cid,\r\n          current_path,\r\n        ),\r\n      )\r\n    } else {\r\n      toaster.danger(t('files:error_upload_fail_target_url'))\r\n      return\r\n    }\r\n\r\n    acceptedFiles.forEach((file) => {\r\n      const formData = new FormData()\r\n      formData.append('file', file, file.name)\r\n\r\n      const config = {\r\n        // eslint-disable-next-line\r\n        onUploadProgress: (progressEvent: any) => {\r\n          if (progressEvent.lengthComputable) {\r\n            const percentCompleted = Math.round(\r\n              (progressEvent.loaded / progressEvent.total) * 100,\r\n            )\r\n            eventHandle.onUploadProgress(percentCompleted)\r\n          }\r\n        },\r\n      }\r\n      eventHandle.onUploadStart()\r\n      axios\r\n        .post(targetUrl, formData, config)\r\n        .then(() => {\r\n          eventHandle.onUploadSuccess(file.name)\r\n        })\r\n        .catch((err) => {\r\n          eventHandle.onUploadError(err)\r\n        })\r\n    })\r\n  }\r\n\r\n  const { getRootProps, getInputProps, isDragActive, isFocused } = useDropzone({\r\n    onDrop,\r\n  })\r\n  const style = useMemo(\r\n    () => ({\r\n      ...(isDragActive ? activeStyle : {}),\r\n      ...(isFocused ? activeStyle : {}),\r\n    }),\r\n    [isDragActive],\r\n  )\r\n\r\n  if (uploadStatus.isUploading) {\r\n    // uploading status\r\n    return (\r\n      <a\r\n        className=\"overview-item overview-item-flex upload-diabled\"\r\n        title={t('files:uploading') + ':' + uploadStatus.percent + '%'}>\r\n        <DoubleChevronUpIcon size={32} className=\"item-icon\" />\r\n        {uploadStatus.percent < 100 && (\r\n          <Strong size={300} className=\"item-title\">\r\n            {t('files:uploading')} {':'} {uploadStatus.percent}\r\n            {'%'}\r\n          </Strong>\r\n        )}\r\n        {uploadStatus.percent >= 100 && (\r\n          <Strong size={300} className=\"item-title\">\r\n            {t('files:upload_completed')}\r\n          </Strong>\r\n        )}\r\n      </a>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <a className=\"overview-item overview-item-flex\" {...getRootProps(style)}>\r\n      <input {...getInputProps()} />\r\n      <UploadIcon size={32} className=\"item-icon\" />\r\n      <Tooltip content={t('files:upload_tooltip')}>\r\n        <Strong size={300} className=\"item-title\">\r\n          {t('files:upload_btn')}\r\n          <InfoSignIcon size={14} marginLeft=\"6px\" verticalAlign=\"middle\" />\r\n        </Strong>\r\n      </Tooltip>\r\n    </a>\r\n  )\r\n}\r\n\r\nexport default SftpUpload\r\n","export type CurrentPath = {\r\n  current_path: string\r\n  display_path: string\r\n}\r\n\r\nexport type FileItem = {\r\n  path: string\r\n  name: string\r\n  mode: number\r\n  loading: boolean\r\n  children?: Array<FileItem>\r\n}\r\nexport const FileModeEmpty = 0\r\nexport const FileModeIsDir = 1 << (32 - 1)\r\nexport const FileModeSymbolLink = 1 << (32 - 5)\r\nexport const FileModeNormalFile = 2\r\n\r\nexport const IsDir = (file: FileItem) => {\r\n  return (file.mode & FileModeIsDir) !== 0\r\n}\r\n\r\nexport const IsSymbolLink = (file: FileItem) => {\r\n  return (file.mode & FileModeSymbolLink) !== 0\r\n}\r\n","import React from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { Badge, DocumentIcon, Pill, Strong } from 'evergreen-ui'\r\n\r\nimport { DownloadStatus } from './GridFileItem'\r\nimport { FileItem } from './files_types'\r\n\r\ninterface DownloadingFileProps {\r\n  status: DownloadStatus\r\n  file: FileItem\r\n}\r\n\r\nconst DownloadingFile = ({ status, file }: DownloadingFileProps) => {\r\n  const { t } = useTranslation(['files'])\r\n  let dataSize = '0'\r\n  let dataUnit = 'B'\r\n  if (status.loaded < 1024) {\r\n    dataSize = status.loaded + ''\r\n  } else if (status.loaded < 1024 * 1024) {\r\n    dataUnit = 'KB'\r\n    dataSize = (status.loaded / 1024).toFixed(2)\r\n  } else if (status.loaded < 1024 * 1024 * 1024) {\r\n    dataUnit = 'MB'\r\n    dataSize = (status.loaded / 1024 / 1024).toFixed(2)\r\n  } else {\r\n    dataUnit = 'GB'\r\n    dataSize = (status.loaded / 1024 / 1024 / 1024).toFixed(2)\r\n  }\r\n  return (\r\n    <a className=\"overview-item item-dl-container\" title={file.name}>\r\n      <a className=\"dl-file-cover\">\r\n        <Badge color=\"blue\" marginBottom=\"0.2rem\">\r\n          {t('files:dl_text_preparing')}\r\n        </Badge>\r\n        <Pill color=\"blue\" isSolid>\r\n          {dataSize} {dataUnit}\r\n        </Pill>\r\n      </a>\r\n      <a className=\"dl-file-item\">\r\n        <DocumentIcon size={32} className=\"item-icon\" />\r\n        <Strong size={300} className=\"item-title\">\r\n          {' '}\r\n          {file.name}{' '}\r\n        </Strong>\r\n      </a>\r\n    </a>\r\n  )\r\n}\r\n\r\nexport default DownloadingFile\r\n","import { Base64 } from 'js-base64'\r\nimport { IDisposable, Terminal } from 'xterm'\r\n\r\nconst sshWebSocket = {\r\n  bindTerminal: (\r\n    term: Terminal,\r\n    websocket: WebSocket,\r\n    bidirectional: boolean,\r\n    bufferedTime: number,\r\n  ) => {\r\n    // term.socket = websocket;\r\n    let messageBuffer = ''\r\n    const handleWebSocketMessage = function (ev: MessageEvent) {\r\n      if (ev.data instanceof ArrayBuffer) {\r\n        // it is Binary websocket data\r\n        term.write(new Uint8Array(ev.data))\r\n        return\r\n      }\r\n      if (bufferedTime && bufferedTime > 0) {\r\n        if (messageBuffer) {\r\n          messageBuffer += ev.data\r\n        } else {\r\n          messageBuffer = ev.data\r\n          setTimeout(function () {\r\n            term.write(messageBuffer)\r\n          }, bufferedTime)\r\n        }\r\n      } else {\r\n        term.write(ev.data)\r\n      }\r\n    }\r\n    const handleTerminalData = function (data: string) {\r\n      websocket.send(\r\n        JSON.stringify({\r\n          type: 'terminal',\r\n          data: {\r\n            base64: Base64.encode(data), // encode data as base64 format\r\n          },\r\n        }),\r\n      )\r\n    }\r\n\r\n    websocket.onmessage = handleWebSocketMessage\r\n    let dataListener: IDisposable | null = null\r\n    if (bidirectional) {\r\n      dataListener = term.onData(handleTerminalData)\r\n    }\r\n\r\n    // send heartbeat package to avoid closing webSocket connection in some proxy environmental such as nginx.\r\n    const heartBeatTimer = setInterval(function () {\r\n      websocket.send(JSON.stringify({ type: 'heartbeat', data: '' }))\r\n    }, 20 * 1000)\r\n\r\n    websocket.addEventListener('close', function () {\r\n      websocket.removeEventListener('message', handleWebSocketMessage)\r\n      if (dataListener) {\r\n        dataListener.dispose()\r\n      }\r\n      // delete term.socket;\r\n      clearInterval(heartBeatTimer)\r\n    })\r\n  },\r\n}\r\n\r\nexport default sshWebSocket\r\n","import { Terminal } from 'xterm'\r\n\r\ninterface TermSize {\r\n  rows: number\r\n  cols: number\r\n}\r\n\r\nconst resize = {\r\n  bindTerminalResize: function (term: Terminal, websocket: WebSocket) {\r\n    const onTermResize = (size: TermSize) => {\r\n      websocket.send(\r\n        JSON.stringify({\r\n          type: 'resize',\r\n          data: { rows: size.rows, cols: size.cols },\r\n        }),\r\n      )\r\n    }\r\n    // register resize event.\r\n    const resizeListener = term.onResize(onTermResize)\r\n    // unregister resize event when WebSocket closed.\r\n    websocket.addEventListener('close', function () {\r\n      resizeListener.dispose()\r\n    })\r\n  },\r\n}\r\n\r\nexport default resize\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport {\r\n  Pane,\r\n  Text,\r\n  Heading,\r\n  Badge,\r\n  Menu,\r\n  Popover,\r\n  Position,\r\n  Avatar,\r\n  Portal,\r\n  Button,\r\n  toaster,\r\n  CornerDialog,\r\n} from 'evergreen-ui'\r\nimport {\r\n  FullCircleIcon,\r\n  UngroupObjectsIcon,\r\n  RefreshIcon,\r\n  SwapVerticalIcon,\r\n  FullscreenIcon,\r\n  MinimizeIcon,\r\n  LogOutIcon,\r\n  CogIcon,\r\n  ErrorIcon,\r\n  DisableIcon,\r\n} from 'evergreen-ui'\r\nimport { RouteComponentProps } from 'react-router-dom'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { FitAddon } from 'xterm-addon-fit'\r\nimport { WebLinksAddon } from 'xterm-addon-web-links'\r\n\r\nimport XTerm from './term/XTerm'\r\nimport theme from './term/term_theme'\r\nimport FileTrans, { NodeConfig, ConnStatus } from './FileTrans'\r\nimport sshWebSocket from '../libs/sshwebsocket'\r\nimport terminalResize from '../libs/terminal-resize'\r\nimport Util from '../libs/utils'\r\nimport apiRouters from '../config/api_routers'\r\nimport Config from '../config/config'\r\nimport stringFormat from '../libs/string_format'\r\n\r\nimport './console.less'\r\n\r\ntype ConnStatusProps = {\r\n  host: string\r\n  status: ConnStatus\r\n}\r\n\r\nconst ConnectionStatus = (props: ConnStatusProps) => {\r\n  if (props.status === ConnStatus.Connecting) {\r\n    return (\r\n      <>\r\n        <UngroupObjectsIcon\r\n          verticalAlign=\"baseline\"\r\n          size={10}\r\n          color=\"info\"\r\n          marginRight={8}\r\n        />\r\n        <Badge isInteractive textTransform=\"lowercase\" color=\"blue\">\r\n          waiting connection\r\n        </Badge>\r\n      </>\r\n    )\r\n  } else if (props.status === ConnStatus.ConnectionLost) {\r\n    return (\r\n      <>\r\n        <DisableIcon\r\n          verticalAlign=\"baseline\"\r\n          size={10}\r\n          color=\"#FAE2E2\"\r\n          marginRight={8}\r\n        />\r\n        <Badge isInteractive color=\"red\">\r\n          connection lost\r\n        </Badge>\r\n      </>\r\n    )\r\n  } else {\r\n    return (\r\n      <>\r\n        <FullCircleIcon\r\n          verticalAlign=\"baseline\"\r\n          size={10}\r\n          color=\"success\"\r\n          marginRight={8}\r\n        />\r\n        <Badge isInteractive textTransform=\"lowercase\" color=\"green\">\r\n          {props.host}\r\n        </Badge>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst Console = (props: RouteComponentProps) => {\r\n  const [isSideSheetShown, setSideSheetShwon] = useState<boolean>(false)\r\n  const terminalRef = useRef<XTerm>(null)\r\n  const { t } = useTranslation(['translation', 'console'])\r\n  const [fitAddon] = useState<FitAddon>(new FitAddon())\r\n  const [webLinksAddon] = useState<WebLinksAddon>(new WebLinksAddon())\r\n  const [fullscreen, setFullscreen] = useState<boolean>(false)\r\n  const [connecting, setConnecting] = useState<ConnStatus>(\r\n    ConnStatus.Connecting,\r\n  )\r\n  const [nodeConfig, setNodeConfig] = useState<NodeConfig>({\r\n    host: 'waiting connection',\r\n    username: 'Loading',\r\n  })\r\n  const [showCornerDialog, setShowCornerDialog] = useState<boolean>(false)\r\n\r\n  let ws: WebSocket | null = null\r\n\r\n  useEffect(() => {\r\n    const lhost = window.localStorage.getItem('user.host')\r\n    const luname = window.localStorage.getItem('user.username')\r\n    if (lhost === null) {\r\n      return\r\n    }\r\n    if (luname === null) {\r\n      return\r\n    }\r\n    setNodeConfig({ host: lhost, username: luname })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    // Once the terminal is loaded write a new line to it.\r\n    const term = terminalRef.current!.terminal\r\n    fitAddon.fit()\r\n    term.writeln('Welcome to SSH web-console!')\r\n\r\n    const _t = sessionStorage.getItem(Config.jwt.tokenName)\r\n    if (_t === null) {\r\n      toaster.danger(t('console:web_socket_expire'))\r\n      // setConnecting(ConnStatus.ConnectionLost)\r\n      props.history.push('/signin')\r\n      return\r\n    }\r\n\r\n    ws = new WebSocket(\r\n      Util.loadWebSocketUrl(\r\n        apiRouters.router.ws_ssh,\r\n        stringFormat.format(\r\n          apiRouters.params.ws_ssh,\r\n          term.cols + '',\r\n          term.rows + '',\r\n          _t,\r\n        ),\r\n      ),\r\n    )\r\n    ws.binaryType = 'arraybuffer'\r\n    ws.onopen = () => {\r\n      setConnecting(ConnStatus.ConnectionAlive)\r\n    }\r\n\r\n    ws.onclose = () => {\r\n      term.setOption('cursorBlink', false)\r\n      sessionStorage.removeItem(Config.jwt.tokenName)\r\n      setConnecting(ConnStatus.ConnectionLost)\r\n      setShowCornerDialog(true)\r\n    }\r\n\r\n    sshWebSocket.bindTerminal(term, ws!, true, -1)\r\n    terminalResize.bindTerminalResize(term, ws!)\r\n    return () => {\r\n      if (ws !== null) {\r\n        ws.close()\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    fitAddon.fit()\r\n  }, [fullscreen])\r\n\r\n  const onWindowResize = () => {\r\n    fitAddon.fit()\r\n  }\r\n  const closeWindowListener = (ev: BeforeUnloadEvent) => {\r\n    ev.preventDefault()\r\n    ev.returnValue = t('console:make_sure_to_leave')\r\n  }\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('resize', onWindowResize)\r\n    window.addEventListener('beforeunload', closeWindowListener)\r\n    return () => {\r\n      window.removeEventListener('resize', onWindowResize)\r\n      window.removeEventListener('beforeunload', closeWindowListener)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <Pane height=\"100vh\" display=\"flex\" flexDirection=\"column\" borderRadius={3}>\r\n      <Pane\r\n        display=\"flex\"\r\n        flexDirection=\"row\"\r\n        alignItems=\"center\"\r\n        background=\"rgba(27,33,47,0.86)\">\r\n        <Heading padding={18} color=\"white\">\r\n          {' '}\r\n          {t('title')}\r\n        </Heading>\r\n        <Pane\r\n          padding={18}\r\n          flex={1}\r\n          alignItems=\"center\"\r\n          alignContent=\"center\"\r\n          textAlign=\"center\">\r\n          <ConnectionStatus status={connecting} host={nodeConfig.host} />\r\n        </Pane>\r\n        <Popover\r\n          position={Position.BOTTOM_LEFT}\r\n          content={\r\n            <Menu>\r\n              <Menu.Group>\r\n                <Menu.Item>\r\n                  {'@'} {nodeConfig.username}{' '}\r\n                </Menu.Item>\r\n              </Menu.Group>\r\n              <Menu.Divider />\r\n              <Menu.Group>\r\n                <Menu.Item\r\n                  icon={LogOutIcon}\r\n                  intent=\"danger\"\r\n                  onSelect={() => {\r\n                    toaster.notify('under develop!', { id: 'dev' })\r\n                  }}>\r\n                  {t('console:nav_user_exit')}\r\n                </Menu.Item>\r\n              </Menu.Group>\r\n            </Menu>\r\n          }>\r\n          <Avatar\r\n            isSolid\r\n            name={nodeConfig.username}\r\n            size={36}\r\n            marginRight={36}\r\n            cursor=\"pointer\"\r\n          />\r\n        </Popover>\r\n      </Pane>\r\n      <Pane flex={1} overflowY=\"hidden\">\r\n        <XTerm\r\n          className={\r\n            fullscreen ? 'term-container fullscreen' : 'term-container'\r\n          }\r\n          options={{\r\n            cursorBlink: true,\r\n            bellStyle: 'sound',\r\n            theme: theme.default_theme,\r\n          }}\r\n          addons={[fitAddon, webLinksAddon]}\r\n          ref={terminalRef}\r\n        />\r\n      </Pane>\r\n      <Pane display=\"flex\" alignItems=\"center\">\r\n        <FileTrans\r\n          isShown={isSideSheetShown}\r\n          node={{ host: nodeConfig.host, username: nodeConfig.username }}\r\n          sshStatus={connecting}\r\n          hideSideSheeeet={() => {\r\n            setSideSheetShwon(false)\r\n          }}\r\n        />\r\n        <Button intent=\"success\" onClick={() => setSideSheetShwon(true)}>\r\n          SFTP\r\n        </Button>\r\n        <Button\r\n          intent=\"none\"\r\n          marginLeft=\"0.05rem\"\r\n          onClick={() => {\r\n            toaster.notify('under develop!', { id: 'dev' })\r\n          }}>\r\n          Paste\r\n        </Button>\r\n        <Pane flex=\"1\"></Pane>\r\n        <Text marginRight=\"0.4rem\">active time: 0:00:00</Text>\r\n      </Pane>\r\n      <CornerDialog\r\n        title={\r\n          <Text size={500} color=\"danger\" alignItems=\"center\" display=\"flex\">\r\n            <ErrorIcon marginRight=\"0.2rem\" />{' '}\r\n            {t('console:ssh_disconn_dialog_title')}\r\n          </Text>\r\n        }\r\n        isShown={showCornerDialog}\r\n        hasClose={false}\r\n        cancelLabel={t('console:ssh_disconn_dialog_cancel_btn')}\r\n        confirmLabel={t('console:ssh_disconn_dialog_confirm_btn')}\r\n        onConfirm={() => {\r\n          props.history.push('/signin')\r\n        }}\r\n        containerProps={{ zIndex: 20 }}\r\n        onCloseComplete={() => setShowCornerDialog(false)}>\r\n        {t('console:ssh_disconn_dialog_text')}\r\n      </CornerDialog>\r\n      <Portal>\r\n        <Pane\r\n          className=\"toolbar\"\r\n          zIndex={10}\r\n          borderRadius={4}\r\n          display=\"flex\"\r\n          flexDirection=\"column\"\r\n          background=\"#2d8cf0\"\r\n          padding={0}\r\n          position=\"fixed\"\r\n          top={120}\r\n          right={64}>\r\n          <Button\r\n            appearance=\"minimal\"\r\n            marginY={8}\r\n            className=\"toolbar-item\"\r\n            onClick={() => {\r\n              toaster.notify('under develop!', { id: 'dev' })\r\n            }}>\r\n            <RefreshIcon color=\"white\" size={10} />\r\n          </Button>\r\n          <Button\r\n            appearance=\"minimal\"\r\n            marginY={8}\r\n            className=\"toolbar-item\"\r\n            onClick={() => setSideSheetShwon(true)}>\r\n            <SwapVerticalIcon color=\"white\" size={10} />\r\n          </Button>\r\n          <Button\r\n            appearance=\"minimal\"\r\n            marginY={8}\r\n            className=\"toolbar-item\"\r\n            onClick={() => {\r\n              setFullscreen(!fullscreen)\r\n            }}>\r\n            {!fullscreen && <FullscreenIcon color=\"white\" size={10} />}\r\n            {fullscreen && <MinimizeIcon color=\"white\" size={10} />}\r\n          </Button>\r\n          <Button\r\n            appearance=\"minimal\"\r\n            marginY={8}\r\n            className=\"toolbar-item\"\r\n            onClick={() => {\r\n              toaster.notify('under develop!', { id: 'dev' })\r\n            }}>\r\n            <CogIcon color=\"white\" size={10} />\r\n          </Button>\r\n        </Pane>\r\n      </Portal>\r\n    </Pane>\r\n  )\r\n}\r\n\r\nexport default Console\r\n","export default {\r\n  'zh-CN': {\r\n    global: {\r\n      title: 'SSH Web Console',\r\n      home: '首页',\r\n      switch_lang: 'English',\r\n      error_occurs_try_refresh: 'Oh! 出现了一个错误,请刷新后重试.',\r\n    },\r\n    index: {\r\n      welcome: '欢迎使用 SSH Web Console',\r\n      goto_signin: '去往登录页面',\r\n    },\r\n    files: {\r\n      upload_btn: '上传文件',\r\n      uploading: '上传中',\r\n      upload_completed: '正在处理',\r\n      upload_tooltip: '点击或拖拽文件至此以上传',\r\n      show_hidden_files_menu: '显示隐藏文件',\r\n      hide_hidden_files_menu: '不显示隐藏文件',\r\n      error_upload_fail_no_conneton: '上传文件失败 (连接断开)',\r\n      error_upload_fail_target_url: '上传失败 (获取上传地址错误)',\r\n      dl_text_preparing: '准备中...',\r\n      dl_file_failed: '下载文件失败',\r\n    },\r\n    console: {\r\n      file_transfer: {\r\n        ssh_not_active: 'ssh未连接,请先连接ssh',\r\n        connect_to_sftp_server: '新建SFTP连接',\r\n        error_while_ls: '获取目录信息错误: ',\r\n        error_download_file: '下载文件出错: ',\r\n        empty_dir_or_no_sub_dir: '空目录或无子目录',\r\n        upload_status_pending: '正在处理',\r\n        upload_status_uploading: '正在上传 {percent}%',\r\n        upload_status_def: '上传',\r\n        upload_status_fail: '文件上传失败',\r\n        wait_for_unload_finish: '请等待当前上传文件结束',\r\n      },\r\n      nav_doc: '帮助文档',\r\n      nav_hpcer: 'HPCer',\r\n      nav_project: '项目',\r\n      nav_about: '关于',\r\n      nav_user_exit: '退出',\r\n      toolsbar_refresh: '刷新',\r\n      toolsbar_file_transfer: '文件传输',\r\n      toolsbar_fullscreen: '全屏',\r\n      toolsbar_settings: '设置',\r\n      toolsbar_exit_fullscreen: '退出全屏',\r\n      web_socket_disconnect: '已断开与远程主机连接',\r\n      web_socket_expire: '当前登录状态已失效,请重新登录',\r\n      ssh_disconn_dialog_title: '已断开与远程主机连接',\r\n      ssh_disconn_dialog_cancel_btn: '关闭',\r\n      ssh_disconn_dialog_confirm_btn: '重新连接',\r\n      ssh_disconn_dialog_text: 'SSH 连接已断开, 请重新登录连接',\r\n      relogin: '重新登录',\r\n      ecs_to_exit_fullscreen: '按 ESC 键以退出全屏模式',\r\n      modal_file_transfer_title: '文件传输',\r\n      modal_file_transfer_ok_btn: '完成',\r\n      make_sure_to_leave: '确定要离开吗?',\r\n    },\r\n    signin: {\r\n      form_title: '登录 SSH Web Console',\r\n      form_fullhost_label: '主机',\r\n      form_fullhost_ph: 'ip:端口号 (例: ssh.hpcer.dev:22)',\r\n      form_username_label: '用户名',\r\n      form_username_ph: '用户名',\r\n      form_passwd_label: '密码',\r\n      form_passwd_ph: '密码',\r\n      form_submit_btn: '登录',\r\n      form_submit_btn_loading: '正在登录',\r\n      form_fullhost_required: '主机地址不能为空',\r\n      form_fullhost_error: '主机地址不符合规范',\r\n      form_username_required: '用户名不能为空',\r\n      form_passwd_required: '密码不能为空',\r\n      form_has_error: '登录信息填写有误',\r\n      form_error_passport: '主机名或用户名或密码错误',\r\n      form_error_remote_server: '服务器连接错误',\r\n      form_error_ssh_login: '尝试ssh登录出错', // error test \"who am i\"\r\n      signin_success: '登录成功!',\r\n    },\r\n  },\r\n  'en-US': {\r\n    global: {\r\n      title: 'SSH Web Console',\r\n      home: 'Home',\r\n      switch_lang: '中文',\r\n      error_occurs_try_refresh: 'Oh! An error occurs.Please refresh the page.',\r\n    },\r\n    index: {\r\n      welcome: 'Welcome to SSH Web Console',\r\n      goto_signin: 'Go to Sign in Page',\r\n    },\r\n    files: {\r\n      upload_btn: 'Upload',\r\n      uploading: 'Uploading',\r\n      upload_completed: 'Processing',\r\n      show_hidden_files_menu: 'Show hidden files',\r\n      hide_hidden_files_menu: 'Not show hidden files',\r\n      upload_tooltip: 'Click or drag files here to upload',\r\n      error_upload_fail_no_conneton: 'Upload failed due to lost connection',\r\n      error_upload_fail_target_url:\r\n        'Upload failed while obtaining uploading address',\r\n      dl_text_preparing: 'Preparing',\r\n      dl_file_failed: 'Download file failded',\r\n    },\r\n    console: {\r\n      file_transfer: {\r\n        ssh_not_active: 'ssh is not active, please login in ssh first.',\r\n        connect_to_sftp_server: 'Start a new sftp connection',\r\n        error_while_ls: 'error happened while list directory: ',\r\n        error_download_file: 'error happened while download file: ',\r\n        empty_dir: 'Empty Directory or no Sub Directories',\r\n        upload_status_pending: 'pending',\r\n        upload_status_uploading: 'uploading {percent}%',\r\n        upload_status_def: 'Upload',\r\n        upload_status_fail: 'Upload Failed',\r\n        wait_for_unload_finish: 'Please wait for finishing uploading file(s)',\r\n      },\r\n      nav_doc: 'Docs',\r\n      nav_hpcer: 'HPCer',\r\n      nav_project: 'Projects',\r\n      nav_about: 'About',\r\n      nav_user_exit: 'Exit',\r\n      toolsbar_refresh: 'refresh',\r\n      toolsbar_file_transfer: 'file transfer',\r\n      toolsbar_fullscreen: 'fullscreen',\r\n      toolsbar_settings: 'settings',\r\n      toolsbar_exit_fullscreen: 'exit fullscreen',\r\n      web_socket_disconnect: 'Disconnected from remote host',\r\n      web_socket_expire: 'Your session has been expired,please relogin.',\r\n      ssh_disconn_dialog_title: 'Disconnected from remote host',\r\n      ssh_disconn_dialog_cancel_btn: 'Close',\r\n      ssh_disconn_dialog_confirm_btn: 'Reconnect',\r\n      ssh_disconn_dialog_text: 'SSH connection was lost, please reconnect',\r\n      relogin: 'Relogin',\r\n      ecs_to_exit_fullscreen: 'Press ESC key to exit fullscreen mode.',\r\n      modal_file_transfer_title: 'File Transfer',\r\n      modal_file_transfer_ok_btn: 'Finish',\r\n      make_sure_to_leave: 'Are sure to close this session?',\r\n    },\r\n    signin: {\r\n      form_title: 'Sign In SSH Web Console',\r\n      form_fullhost_label: 'Host',\r\n      form_fullhost_ph: 'ip:port (e.g: hpc.gensh.me:22)',\r\n      form_username_label: 'Username',\r\n      form_username_ph: 'Username',\r\n      form_passwd_label: 'Password',\r\n      form_passwd_ph: 'Password',\r\n      form_submit_btn: 'Sign In',\r\n      form_submit_btn_loading: 'Loading',\r\n      form_fullhost_required: 'host is required',\r\n      form_fullhost_error: 'host is not the right form',\r\n      form_username_required: 'username is required',\r\n      form_passwd_required: 'password is required',\r\n      form_has_error: 'There are some errors in the form,check again.',\r\n      form_error_passport: 'Error host or username or password',\r\n      form_error_remote_server: 'Error connecting to remote server',\r\n      form_error_ssh_login: 'Error to execute ssh login',\r\n      signin_success: 'success!',\r\n    },\r\n  },\r\n}\r\n","import i18n from 'i18next'\r\nimport { initReactI18next } from 'react-i18next'\r\n\r\nimport translation from './locales'\r\n\r\n// the translations\r\n// (tip move them in a JSON file and import them)\r\nconst resources = {\r\n  en: {\r\n    translation: translation['en-US'].global,\r\n    home: translation['en-US'].index,\r\n    console: translation['en-US'].console,\r\n    signin: translation['en-US'].signin,\r\n    files: translation['en-US'].files,\r\n  },\r\n  'zh-CN': {\r\n    translation: translation['zh-CN'].global,\r\n    home: translation['zh-CN'].index,\r\n    console: translation['zh-CN'].console,\r\n    signin: translation['zh-CN'].signin,\r\n    files: translation['zh-CN'].files,\r\n  },\r\n}\r\n\r\nconst getLang = () => {\r\n  const navLang =\r\n    navigator.language === 'zh-CN' || navigator.language === 'en'\r\n      ? navigator.language\r\n      : false\r\n  const localLang = window.localStorage.getItem('language')\r\n  const lsLang = localLang === 'zh-CN' || localLang === 'en' ? localLang : false\r\n  return lsLang || navLang || 'en' // fallback to en\r\n}\r\n\r\ni18n\r\n  .use(initReactI18next) // passes i18n down to react-i18next\r\n  //   .use(LanguageDetector)\r\n  .init({\r\n    resources,\r\n    lng: getLang(),\r\n    fallbackLng: 'en',\r\n    // debug: true,\r\n    keySeparator: '.', // we can use keys in form messages.welcome\r\n    interpolation: {\r\n      escapeValue: false, // react already safes from xss\r\n    },\r\n  })\r\n\r\nexport const SwitchLang = () => {\r\n  const lang = getLang()\r\n  const newLang = lang === 'zh-CN' ? 'en' : 'zh-CN'\r\n  i18n.changeLanguage(newLang)\r\n  localStorage.setItem('language', newLang)\r\n}\r\n\r\nexport default i18n\r\n","import React from 'react'\r\nimport { Pane, Button, GitRepoIcon } from 'evergreen-ui'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { SwitchLang } from '../../locales/i18n'\r\nimport './footer.less'\r\nconst githublink = 'https://github.com/genshen/ssh-web-console'\r\n\r\nfunction Footer() {\r\n  const { t } = useTranslation(['translation'])\r\n  return (\r\n    <Pane\r\n      display=\"flex\"\r\n      justifyContent=\"center\"\r\n      alignItems=\"center\"\r\n      padding={16}\r\n      background=\"tint2\"\r\n      borderRadius={3}>\r\n      <Pane>\r\n        <Button\r\n          is=\"a\"\r\n          target=\"_blank\"\r\n          href={githublink}\r\n          marginRight={8}\r\n          iconBefore={GitRepoIcon}\r\n          appearance=\"minimal\">\r\n          {' '}\r\n          Github{' '}\r\n        </Button>\r\n        <Button marginRight={8} onClick={SwitchLang}>\r\n          {' '}\r\n          {t('switch_lang')}{' '}\r\n        </Button>\r\n      </Pane>\r\n    </Pane>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react'\r\nimport { Pane, Heading } from 'evergreen-ui'\r\nimport { Link } from 'react-router-dom'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport './header.less'\r\n\r\nconst Header = () => {\r\n  const { t } = useTranslation(['translation'])\r\n  return (\r\n    <Pane\r\n      display=\"flex\"\r\n      padding={16}\r\n      background=\"tint2\"\r\n      border={false}\r\n      className=\"header-pane\">\r\n      <Pane flex={1} alignItems=\"center\" display=\"flex\">\r\n        <Heading size={600}>\r\n          <Link to=\"/\" className=\"focus-ring-link\">\r\n            {t('title')}\r\n          </Link>\r\n        </Heading>\r\n      </Pane>\r\n    </Pane>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","import React, { useState } from 'react'\r\nimport { RouteComponentProps } from 'react-router-dom'\r\nimport {\r\n  Button,\r\n  Pane,\r\n  Heading,\r\n  TextInputField,\r\n  GeolocationIcon,\r\n  FormField,\r\n  toaster,\r\n} from 'evergreen-ui'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport Config from '../config/config'\r\nimport Utils from '../libs/utils'\r\nimport apiRouters from '../config/api_routers'\r\n\r\ninterface FieldState {\r\n  isInvalid: boolean\r\n  validationMessage: string | undefined\r\n  value: string\r\n}\r\n\r\nconst checkHostFormat = (host: string) => {\r\n  if (!host || host === '') {\r\n    return [false, '', 22]\r\n  }\r\n  const hostList = host.split(':')\r\n  if (hostList.length === 1) {\r\n    return [true, host, 22]\r\n  }\r\n  const ok =\r\n    hostList.length === 2 &&\r\n    hostList[1].length !== 0 &&\r\n    !isNaN(Number(hostList[1]))\r\n  if (ok) {\r\n    return [true, hostList[0], parseInt(hostList[1])]\r\n  } else {\r\n    return [false, host, 22]\r\n  }\r\n}\r\n\r\nconst Signin = (props: RouteComponentProps) => {\r\n  const { t } = useTranslation(['signin'])\r\n\r\n  const lhost = window.localStorage.getItem('user.host')\r\n  const luname = window.localStorage.getItem('user.username')\r\n\r\n  const [hostField, setHostField] = useState<FieldState>({\r\n    isInvalid: false,\r\n    validationMessage: undefined,\r\n    value: lhost ? lhost : '127.0.0.1:22',\r\n  })\r\n  const [unameField, setUnameField] = useState<FieldState>({\r\n    isInvalid: false,\r\n    validationMessage: undefined,\r\n    value: luname ? luname : 'root',\r\n  })\r\n  const [passwdField, setPasswdField] = useState<string>('')\r\n  const [submitLoading, setSubmitLoading] = useState<boolean>(false)\r\n\r\n  const onHostChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const host = event!.target!.value.trim()\r\n    if (!host || host === '') {\r\n      // set required error\r\n      setHostField({\r\n        isInvalid: true,\r\n        validationMessage: t('signin:form_fullhost_required'),\r\n        value: host,\r\n      })\r\n      return false\r\n    }\r\n    const [ok] = checkHostFormat(host)\r\n    if (ok) {\r\n      setHostField({\r\n        isInvalid: false,\r\n        validationMessage: undefined,\r\n        value: host,\r\n      })\r\n      return true\r\n    } else {\r\n      setHostField({\r\n        isInvalid: true,\r\n        validationMessage: t('signin:form_fullhost_error'),\r\n        value: host,\r\n      })\r\n      return false\r\n    }\r\n  }\r\n\r\n  const onUsernameChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const username = event!.target!.value.trim()\r\n    if (!username || username === '') {\r\n      setUnameField({\r\n        isInvalid: true,\r\n        validationMessage: t('signin:form_username_required'),\r\n        value: username,\r\n      })\r\n      return false\r\n    }\r\n    setUnameField({\r\n      isInvalid: false,\r\n      validationMessage: undefined,\r\n      value: username,\r\n    })\r\n    return true\r\n  }\r\n\r\n  const onPasswdChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const password = event!.target!.value.trim()\r\n    setPasswdField(password)\r\n  }\r\n\r\n  const doSignin = () => {\r\n    // still check form when submitting.\r\n    // (e.g. We don't edit input box, leaving it blank,\r\n    // which makes host and username empty, but `isInvalid` is still false).\r\n    let hasError = false\r\n    if (hostField.isInvalid || unameField.isInvalid) {\r\n      hasError = true\r\n      // we dont need show error message and invalid statue here, because it is alreay in invalid status.\r\n    }\r\n    if (!hostField.value || hostField.value === '') {\r\n      hasError = true\r\n      setHostField({\r\n        isInvalid: true,\r\n        validationMessage: t('signin:form_fullhost_required'),\r\n        value: hostField.value,\r\n      })\r\n    }\r\n    if (!unameField.value || unameField.value === '') {\r\n      hasError = true\r\n      setUnameField({\r\n        isInvalid: true,\r\n        validationMessage: t('signin:form_username_required'),\r\n        value: unameField.value,\r\n      })\r\n    }\r\n    // prepare data for login\r\n    const [ok, host, port] = checkHostFormat(hostField.value)\r\n    if (!ok) {\r\n      hasError = true\r\n      setHostField({\r\n        isInvalid: true,\r\n        validationMessage: t('signin:form_fullhost_error'),\r\n        value: hostField.value,\r\n      })\r\n    }\r\n    if (hasError) {\r\n      toaster.warning(t('signin:form_has_error'), { id: 'forbidden-action' })\r\n      return\r\n    } else {\r\n      toaster.closeAll()\r\n    }\r\n\r\n    // this.$Loading.start();\r\n    setSubmitLoading(true)\r\n    // post to login\r\n    Utils.axiosInstance\r\n      .post(Utils.loadUrl(apiRouters.router.sign_in, null), {\r\n        // _xsrf: Utils.base64Decode(xsrf.split(\"|\")[0]), // todo\r\n        host: host,\r\n        port: port,\r\n        username: unameField.value,\r\n        passwd: passwdField,\r\n      })\r\n      .then((response) => {\r\n        try {\r\n          if (!response.data || response.data.has_error) {\r\n            // self.$Loading.error();\r\n            switch (response.data.message) {\r\n              case 0:\r\n                toaster.danger(t('signin:form_has_error'))\r\n                break\r\n              case 1:\r\n                toaster.danger(t('signin:form_error_passport'))\r\n                break\r\n              case 2:\r\n                toaster.danger(t('signin:form_error_ssh_login'))\r\n                break\r\n            }\r\n          } else {\r\n            if (!response.data.addition) {\r\n              // self.$Loading.error();\r\n              toaster.danger(t('signin:form_error_remote_server'))\r\n            } else {\r\n              // self.$Loading.finish();\r\n              toaster.success(t('signin:signin_success'))\r\n              localStorage.setItem('user.host', hostField.value)\r\n              localStorage.setItem('user.username', unameField.value)\r\n              sessionStorage.setItem(\r\n                Config.jwt.tokenName,\r\n                response.data.addition,\r\n              )\r\n\r\n              props.history.push('/console')\r\n            }\r\n          }\r\n        } catch (e) {\r\n          // self.$Loading.error();\r\n          toaster.danger(t('signin:form_error_ssh_login'))\r\n        }\r\n        setSubmitLoading(false)\r\n      })\r\n      .catch((e: Error) => {\r\n        // self.$Loading.error();\r\n        toaster.danger(t('signin:form_error_ssh_login') + ': ' + e.message)\r\n        setSubmitLoading(false)\r\n      })\r\n    // } else {\r\n    //   toaster.danger(this.$t('global.error_occurs_try_refresh'))\r\n    // }\r\n  }\r\n\r\n  return (\r\n    <Pane\r\n      alignItems=\"center\"\r\n      justifyContent=\"center\"\r\n      display=\"flex\"\r\n      flexDirection=\"column\">\r\n      <div\r\n        style={{ minHeight: '360px', marginTop: '10rem', textAlign: 'center' }}>\r\n        <Heading marginBottom=\"0.6rem\" marginTop=\"0.6rem\" size={700}>\r\n          {t('signin:form_title')}\r\n        </Heading>\r\n        <form\r\n          onSubmit={(event: React.FormEvent<HTMLFormElement>) => {\r\n            event.preventDefault()\r\n            doSignin()\r\n            return false\r\n          }}>\r\n          <Pane textAlign=\"left\">\r\n            <TextInputField\r\n              value={hostField.value}\r\n              isInvalid={hostField.isInvalid}\r\n              validationMessage={hostField.validationMessage}\r\n              label={t('signin:form_fullhost_label')}\r\n              onChange={onHostChanged}\r\n              onBlur={onHostChanged}\r\n              placeholder={t('signin:form_fullhost_ph')}\r\n              marginBottom=\"8px\"\r\n            />\r\n            <TextInputField\r\n              value={unameField.value}\r\n              isInvalid={unameField.isInvalid}\r\n              label={t('signin:form_username_label')}\r\n              onChange={onUsernameChanged}\r\n              onBlur={onUsernameChanged}\r\n              placeholder={t('signin:form_username_ph')}\r\n              validationMessage={unameField.validationMessage}\r\n              marginBottom=\"8px\"\r\n            />\r\n            <TextInputField\r\n              label={t('signin:form_passwd_label')}\r\n              type=\"password\"\r\n              placeholder={t('signin:form_passwd_ph')}\r\n              marginBottom=\"24px\"\r\n              onChange={onPasswdChanged}\r\n              onBlur={onPasswdChanged}\r\n              onKeyDown={(event: React.KeyboardEvent<HTMLDivElement>): void => {\r\n                // 'keypress' event misbehaves on mobile so we track 'Enter' key via 'keydown' event\r\n                if (event.key === 'Enter') {\r\n                  event.preventDefault()\r\n                  event.stopPropagation()\r\n                  doSignin()\r\n                }\r\n              }}\r\n            />\r\n          </Pane>\r\n          <FormField>\r\n            <Button\r\n              isLoading={submitLoading}\r\n              type=\"submit\"\r\n              width=\"100%\"\r\n              appearance=\"primary\"\r\n              justifyContent=\"center\"\r\n              intent=\"success\"\r\n              iconBefore={GeolocationIcon}>\r\n              {t('signin:form_submit_btn')}\r\n            </Button>\r\n          </FormField>\r\n        </form>\r\n      </div>\r\n    </Pane>\r\n  )\r\n}\r\n\r\nexport default Signin\r\n","import React from 'react'\r\nimport { NavLink, Route, Switch } from 'react-router-dom'\r\nimport { Button, Pane, Heading } from 'evergreen-ui'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport Footer from './layout/Footer'\r\nimport Header from './layout/Header'\r\nimport Signin from './Signin'\r\n\r\nimport './home.less'\r\nimport headerLogo from '../assets/ssh.png'\r\n\r\nconst MainPage = () => {\r\n  const { t } = useTranslation(['home'])\r\n  return (\r\n    <>\r\n      <Pane\r\n        alignItems=\"center\"\r\n        justifyContent=\"center\"\r\n        display=\"flex\"\r\n        flexDirection=\"column\">\r\n        <div\r\n          style={{\r\n            minHeight: '360px',\r\n            marginTop: '10rem',\r\n            textAlign: 'center',\r\n          }}>\r\n          <img src={headerLogo} className=\"App-logo\" alt=\"logo\" />\r\n          <Heading marginBottom=\"0.6rem\" marginTop=\"0.6rem\" size={700}>\r\n            {t('home:welcome')}\r\n          </Heading>\r\n          <div>\r\n            <NavLink to=\"/signin\" className=\"focus-ring-link\">\r\n              <Button appearance=\"primary\"> {t('home:goto_signin')} </Button>\r\n            </NavLink>\r\n          </div>\r\n        </div>\r\n      </Pane>\r\n    </>\r\n  )\r\n}\r\n\r\nconst Home = () => {\r\n  return (\r\n    <div className=\"home-container\">\r\n      <header className=\"home-content-header\">\r\n        <Header />\r\n      </header>\r\n      <main className=\"home-content-main main-content-container\">\r\n        <Switch>\r\n          <Route exact path={`/`} component={MainPage} />\r\n          <Route path={`/signin`} component={Signin} />\r\n        </Switch>\r\n      </main>\r\n      <footer className=\"home-content-footer\">\r\n        <Footer />\r\n      </footer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home\r\n","export default \"data:image/png;base64,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\"","import React from 'react'\r\nimport { Route, Switch } from 'react-router-dom'\r\nimport Console from './components/Console'\r\nimport Home from './components/Home'\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Switch>\r\n        <Route path=\"/console\" exact component={Console} />\r\n        <Route path=\"/\" component={Home} />\r\n      </Switch>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\r\n    ),\r\n)\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void\r\n}\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config)\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://cra.link/PWA',\r\n          )\r\n        })\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config)\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing\r\n        if (installingWorker == null) {\r\n          return\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://cra.link/PWA.',\r\n              )\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration)\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.')\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error)\r\n    })\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type')\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload()\r\n          })\r\n        })\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config)\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.',\r\n      )\r\n    })\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister()\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message)\r\n      })\r\n  }\r\n}\r\n","import { ReportHandler } from 'web-vitals'\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry)\r\n      getFID(onPerfEntry)\r\n      getFCP(onPerfEntry)\r\n      getLCP(onPerfEntry)\r\n      getTTFB(onPerfEntry)\r\n    })\r\n  }\r\n}\r\n\r\nexport default reportWebVitals\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\n\r\nimport './index.less'\r\nimport App from './App'\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration'\r\nimport reportWebVitals from './reportWebVitals'\r\nimport config from './config/config'\r\nimport './locales/i18n'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router basename={config.router.basepath}>\r\n      <App />\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n)\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.register()\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n"],"sourceRoot":""}